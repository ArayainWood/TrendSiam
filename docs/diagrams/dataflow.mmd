graph TD
    %% Data Flow Diagram - Thai Labels
    
    subgraph "р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Фр╕┤р╕Ъ"
        YT["ЁЯУ║ YouTube API<br/>Raw Video Data"]
    end
    
    subgraph "р╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е"
        FETCH["ЁЯФД Data Fetcher<br/>summarize_all_v2.py"]
        AI["ЁЯдЦ AI Processor<br/>OpenAI Integration"]
        IMG["ЁЯОи Image Generator<br/>DALL-E Integration"]
        SCORE["ЁЯУК Popularity Scorer<br/>Algorithm Processing"]
    end
    
    subgraph "р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е Supabase"
        NT["ЁЯУ░ news_trends<br/>р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Вр╣Ир╕▓р╕зр╕лр╕ер╕▒р╕Б"]
        WS["ЁЯУЛ weekly_snapshots<br/>р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕гр╕▓р╕вр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣М"]
        AIG["ЁЯЦ╝я╕П ai_images<br/>р╕ар╕▓р╕Юр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╕Фр╣Йр╕зр╕в AI"]
        STOR["ЁЯТ╛ Storage Bucket<br/>р╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Ю"]
    end
    
    subgraph "р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕е"
        HOME["ЁЯПа Homepage<br/>р╕Вр╣Ир╕▓р╕зр╕ер╣Ир╕▓р╕кр╕╕р╕Ф"]
        WEEKLY["ЁЯУК Weekly Report<br/>р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕кр╕гр╕╕р╕Ы"]
        PDF["ЁЯУД PDF Export<br/>р╕гр╕▓р╕вр╕Зр╕▓р╕Щ PDF"]
    end
    
    %% Data flow sequence
    YT --> |"1. р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕зр╕┤р╕Фр╕╡р╣Вр╕н<br/>metadata, stats"| FETCH
    FETCH --> |"2. р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Фр╕┤р╕Ъ<br/>р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е"| AI
    AI --> |"3. р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕гр╕╕р╕Ы<br/>р╕Ир╕▒р╕Фр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И"| SCORE
    AI --> |"4. р╕кр╕гр╣Йр╕▓р╕З prompt<br/>р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ар╕▓р╕Ю"| IMG
    
    %% Database storage
    SCORE --> |"5. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е<br/>р╕Чр╕╡р╣Ир╕Ыр╕гр╕░р╕бр╕зр╕ер╣Бр╕ер╣Йр╕з"| NT
    IMG --> |"6. р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕ар╕▓р╕Ю<br/>р╣Бр╕ер╕░ metadata"| AIG
    IMG --> |"7. р╣Ар╕Бр╣Зр╕Ър╣Др╕Яр╕ер╣Мр╕ар╕▓р╕Ю<br/>р╣Гр╕Щ storage"| STOR
    
    %% Weekly processing
    NT --> |"8. р╕кр╕гр╣Йр╕▓р╕З snapshot<br/>р╕гр╕▓р╕вр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣М"| WS
    AIG --> |"9. р╕гр╕зр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ар╕▓р╕Ю<br/>р╣Гр╕Щр╕гр╕▓р╕вр╕Зр╕▓р╕Щ"| WS
    
    %% Frontend display
    NT --> |"10. р╣Бр╕кр╕Фр╕Зр╕Вр╣Ир╕▓р╕з<br/>р╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б"| HOME
    WS --> |"11. р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Зр╕▓р╕Щ<br/>р╕гр╕▓р╕вр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣М"| WEEKLY
    WS --> |"12. р╕кр╕гр╣Йр╕▓р╕З PDF<br/>р╕гр╕▓р╕вр╕Зр╕▓р╕Щ"| PDF
    STOR --> |"13. р╣Вр╕лр╕ер╕Фр╕ар╕▓р╕Ю<br/>р╕Ьр╣Ир╕▓р╕Щ CDN"| HOME
    STOR --> |"14. р╕гр╕зр╕бр╕ар╕▓р╕Ю<br/>р╣Гр╕Щ PDF"| PDF
    
    %% Data validation and quality
    subgraph "р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕╕р╕Ур╕ар╕▓р╕Ю"
        VAL["тЬЕ Data Validation<br/>тАв Schema Validation<br/>тАв Content Quality<br/>тАв Duplicate Detection"]
    end
    
    FETCH --> |"р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е"| VAL
    VAL --> |"р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Ьр╣Ир╕▓р╕Щр╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ"| AI
    
    %% Styling
    classDef sourceClass fill:#FFEBEE,stroke:#C62828,stroke-width:2px
    classDef processClass fill:#E8F5E8,stroke:#388E3C,stroke-width:2px
    classDef dbClass fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
    classDef displayClass fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    classDef validationClass fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    
    class YT sourceClass
    class FETCH,AI,IMG,SCORE processClass
    class NT,WS,AIG,STOR dbClass
    class HOME,WEEKLY,PDF displayClass
    class VAL validationClass
